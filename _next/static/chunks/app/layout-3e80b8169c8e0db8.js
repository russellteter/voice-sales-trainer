(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{283:(e,t,s)=>{"use strict";s.d(t,{As:()=>i,OJ:()=>c});var r=s(5155),a=s(2115),o=s(5731);let n=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[s,c]=(0,a.useState)(null),[i,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{l()},[]);let l=async()=>{u(!0);try{let e=await o.ZQ.getCurrentUser();e.data?c(e.data):e.error&&(0,o.HY)(e.status)&&(o.ZQ.logout(),c(null))}catch(e){console.error("Auth initialization failed:",e),o.ZQ.logout(),c(null)}finally{u(!1)}},d=async e=>{u(!0);try{let t=await o.ZQ.login(e);if(t.data)return c(t.data.user),{success:!0};if(t.error)return{success:!1,error:(0,o.hS)(t.error)};return{success:!1,error:"Login failed"}}catch(e){return console.error("Login error:",e),{success:!1,error:"Network error. Please try again."}}finally{u(!1)}},y=async e=>{u(!0);try{let t=await o.ZQ.register(e);if(t.data){let t=await o.ZQ.login({username:e.username,password:e.password});return t.data&&c(t.data.user),{success:!0}}if(t.error)return{success:!1,error:(0,o.hS)(t.error)};return{success:!1,error:"Registration failed"}}catch(e){return console.error("Registration error:",e),{success:!1,error:"Network error. Please try again."}}finally{u(!1)}},h=()=>{o.ZQ.logout(),c(null)},g=async()=>{try{let e=await o.ZQ.getCurrentUser();e.data?c(e.data):e.error&&(0,o.HY)(e.status)&&h()}catch(e){console.error("Failed to refresh user:",e),h()}};return(0,r.jsx)(n.Provider,{value:{user:s,isLoading:i,isAuthenticated:!!s,login:d,register:y,logout:h,refreshUser:g},children:t})}function i(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},347:()=>{},2926:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var r=s(5155),a=s(283);function o(e){let{children:t}=e;return(0,r.jsx)(a.OJ,{children:t})}},4147:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_5cfdac",variable:"__variable_5cfdac"}},5445:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,4147,23)),Promise.resolve().then(s.t.bind(s,8489,23)),Promise.resolve().then(s.t.bind(s,347,23)),Promise.resolve().then(s.bind(s,2926))},5731:(e,t,s)=>{"use strict";s.d(t,{HK:()=>l,HY:()=>y,Rk:()=>u,ZQ:()=>c,h8:()=>i,hS:()=>d});let r="https://voice-sales-trainer-backend.up.railway.app",a=null;class o{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseUrl).concat(e),r={"Content-Type":"application/json",...t.headers};a&&(r.Authorization="Bearer ".concat(a));try{let e=await fetch(s,{...t,headers:r}),a=await e.json();if(!e.ok)return{error:a,status:e.status};return{data:a,status:e.status}}catch(e){return{error:{error:"Network Error",message:e instanceof Error?e.message:"Unknown network error"},status:0}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}setAuthToken(e){a=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}getAuthToken(){return a}isAuthenticated(){return!!a}constructor(e=r){this.baseUrl=e,a=localStorage.getItem("auth_token")}}let n=new o,c={async login(e){let t=new FormData;t.append("username",e.username),t.append("password",e.password);let s=await fetch("".concat(r,"/auth/token"),{method:"POST",body:t}),a=await s.json();return s.ok?(n.setAuthToken(a.access_token),{data:a,status:s.status}):{error:a,status:s.status}},register:async e=>n.post("/auth/register",e),getCurrentUser:async()=>n.get("/auth/me"),async logout(){n.setAuthToken(null)},refreshToken:async()=>n.post("/auth/refresh")},i={async getAll(e){let t="/scenarios";if(e){let s=new URLSearchParams;e.category&&"All"!==e.category&&s.append("category",e.category),e.difficulty&&"All"!==e.difficulty&&s.append("difficulty",e.difficulty),e.persona&&"All"!==e.persona&&s.append("persona",e.persona),e.search&&s.append("search",e.search);let r=s.toString();r&&(t+="?".concat(r))}return n.get(t)},getById:async e=>n.get("/scenarios/".concat(e)),getFeatured:async()=>n.get("/scenarios/featured")},u={create:async e=>n.post("/sessions",e),getById:async e=>n.get("/sessions/".concat(e)),async getUserSessions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return n.get("/sessions?limit=".concat(e))},updateSession:async(e,t)=>n.put("/sessions/".concat(e),t),completeSession:async e=>n.post("/sessions/".concat(e,"/complete")),pauseSession:async e=>n.post("/sessions/".concat(e,"/pause")),resumeSession:async e=>n.post("/sessions/".concat(e,"/resume")),getAnalytics:async()=>n.get("/sessions/analytics"),addMessage:async(e,t)=>n.post("/sessions/".concat(e,"/messages"),t)},l={processVoice:async e=>n.post("/voice/process",e),startVoiceSession:async e=>n.post("/voice/sessions/".concat(e,"/start")),endVoiceSession:async e=>n.post("/voice/sessions/".concat(e,"/end"))},d=e=>e.message?e.message:e.error?e.error:"An unexpected error occurred",y=e=>401===e||403===e;n.setAuthToken(n.getAuthToken())},8489:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_9a8899",variable:"__variable_9a8899"}}},e=>{e.O(0,[896,441,964,358],()=>e(e.s=5445)),_N_E=e.O()}]);